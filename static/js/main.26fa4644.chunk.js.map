{"version":3,"sources":["composants/Entete.jsx","composants/Dossier.jsx","firebase.js","composants/ListeDossiers.jsx","composants/Accueil.jsx","composants/AjouterDossier.jsx","composants/Appli.jsx","index.jsx"],"names":["Entete","utilisateur","className","Button","variant","size","onClick","firebase","auth","signOut","displayName","Avatar","alt","src","photoURL","Dossier","id","nom","couleur","datemodif","couverture","style","backgroundColor","IconButton","aria-label","disableRipple","formaterDate","d","dateJs","Date","seconds","getDate","getMonth","getFullYear","apps","length","initializeApp","instanceFirebaseUI","firebaseui","AuthUI","firestore","ListeDossiers","etatDossiers","dossiers","setDossiers","useEffect","a","tabDossiers","collection","doc","uid","get","forEach","push","data","chercherDossiers","map","dossier","Accueil","start","signInOptions","GoogleAuthProvider","PROVIDER_ID","FacebookAuthProvider","GithubAuthProvider","signInFlow","AjouterDossier","ouvert","setOuvert","gererAjout","useState","setNom","setCouverture","setCouleur","viderChamps","Dialog","open","onClose","aria-labelledby","DialogTitle","DialogContent","TextField","autoFocus","margin","label","type","fullWidth","onChange","e","target","value","defaultValue","width","triangle","onChangeComplete","hex","color","DialogActions","Appli","setUtilisateur","onAuthStateChanged","util","set","courriel","email","datecompte","FieldValue","serverTimestamp","merge","objDossier","signets","add","then","refDoc","Fab","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.26fa4644.chunk.js","sourcesContent":["import './Entete.scss';\nimport { Avatar } from '@material-ui/core'; \nimport Button from '@material-ui/core/Button';\nimport firebase from 'firebase/app';\n\nexport default function Entete({utilisateur}) {\n  return (\n    <header className=\"Entete\">\n      <div className=\"logo\">\n        Signets\n        <Button \n          variant=\"outlined\"\n          size=\"small\"\n          className=\"btn-deconnexion\"\n          onClick={() => firebase.auth().signOut()}\n        >\n          Déconnexion\n        </Button>\n      </div>\n      <div className=\"utilisateur\">{utilisateur.displayName} <Avatar className=\"avatar\" alt={utilisateur.displayName} src={utilisateur.photoURL} /></div>\n    </header>\n  );\n}","import './Dossier.scss'; \nimport { IconButton } from '@material-ui/core';\nimport SortIcon from '@material-ui/icons/Sort';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\n\nexport default function Dossier({id, nom, couleur, datemodif, couverture}) {\n\n  return (\n    <article className=\"Dossier\" style={{backgroundColor: couleur}}>\n      <div className=\"couverture\">\n        <IconButton className=\"deplacer\" aria-label=\"déplacer\" disableRipple={true}>\n          <SortIcon />\n        </IconButton>\n        <img src={couverture} alt={nom}/>\n      </div>\n      <div className=\"info\">\n        <h2>{nom}</h2>\n        <p>Modifié : {formaterDate(datemodif)}</p>\n      </div>\n      <IconButton className=\"modifier\" aria-label=\"modifier\" size=\"small\">\n        <MoreVertIcon />\n      </IconButton>\n    </article>\n  );\n}\n\n/**\n * Formate les objets date de Firestore et retourne une chaîne de caractères\n * @param {Object} d Objet date retourné par Firestore\n * @returns String date formatée en français\n */\nfunction formaterDate(d) {\n  const dateJs = d ? new Date(d.seconds*1000) : new Date();\n  const mois = ['janvier', 'février', 'mars', 'avril', 'mai', 'juin', 'juillet', 'août', 'septembre', 'octobre', 'novembre', 'décembre'];\n  return `${dateJs.getDate()} ${mois[dateJs.getMonth()]} ${dateJs.getFullYear()}`;\n}","import firebase from 'firebase/app';\nimport * as firebaseui from 'firebaseui';\nimport 'firebase/firestore';\n\n// Configuration (mettez-y les vôtres !)\nconst firebaseConfig = {\n  \n};\n\n// Initialiser Firebase\nif(!firebase.apps.length) {\n  firebase.initializeApp(firebaseConfig);\n}\n\n// Initialiser FirebaseUI\nexport const instanceFirebaseUI = new firebaseui.auth.AuthUI(firebase.auth());\n\n// Initialiser Firestore\nexport const firestore = firebase.firestore();\n","import './ListeDossiers.scss';\nimport Dossier from './Dossier';\nimport { firestore } from '../firebase';\nimport { useEffect, useState } from 'react';\n\nexport default function ListeDossiers({utilisateur, etatDossiers}) {\n  // État des dossiers (notez que cet état est défini dans le composant parent \"Appli\", et passé ici dans les props)\n  const [dossiers, setDossiers] = etatDossiers;\n\n  useEffect(\n    () => {\n      // On crée une fonction asynchrone pour pouvoir utiliser la syntaxe await sur les requêtes asynchrones à Firestore\n      async function chercherDossiers() {\n        // Tableau qui va recevoir nos dossiers de Firestore\n        const tabDossiers = [];\n        // La requête à Firestore utilise 'await' pour retourner la réponse\n        const reponse = await firestore.collection('utilisateurs-ex4').doc(utilisateur.uid).collection('dossiers').get();\n        // On traverse la réponse ...\n        reponse.forEach(\n          // ... et pour chaque doc dans la réponse on ajoute un objet dans tabDossiers\n          doc => {\n            tabDossiers.push({id: doc.id, ...doc.data()})\n          }\n          // Remarquez que le 'id' ne fait pas partie des attributs de données des documents sur Firestore, et il faut l'extraire séparément avec la propriété 'id'. Remarquez aussi l'utilisation de l'opérateur de décomposition (spread operator (...))\n        );\n        // Une fois notre réponse traitée au complet et le tableau tabDossiers renpli avec tous les objets représentants les documents 'dossiers' trouvés, nous pouvons faire la mutation de l'état de la variable 'dossiers' (en utilisant le mutateur setDossiers) pour forcer un 'rerender' (réaffichage) du composant par React\n        setDossiers(tabDossiers);\n      }\n      // Faut pas oublier d'appeler la fonction\n      chercherDossiers();\n    }, []\n  );\n\n  return (\n    <ul className=\"ListeDossiers\">\n      {\n        dossiers.map( \n          dossier =>  <li key={dossier.id}><Dossier {...dossier} /></li>\n        )\n      }\n    </ul>\n  );\n}","import './Accueil.scss';\nimport firebase from 'firebase/app';\nimport { instanceFirebaseUI } from '../firebase';\nimport 'firebaseui/dist/firebaseui.css';\nimport { useEffect } from 'react';\n\nexport default function Accueil() {\n  useEffect(\n    () => instanceFirebaseUI.start(\"#firebaseui-widget\", {\n      signInOptions: [\n        firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n        firebase.auth.FacebookAuthProvider.PROVIDER_ID,\n        firebase.auth.GithubAuthProvider.PROVIDER_ID\n      ],\n      signInFlow: 'popup'\n    }, [])\n  )\n\n  return (\n    <div className=\"Accueil\">\n      <h3 className=\"logo\">Signets <span>beta</span></h3>\n      <h2 className=\"amorce\">Organisez vos signets Web, <br />Simple comme bonjour !</h2>\n      <h4 className=\"connexion-etiquette\">Connexion à Signets</h4>\n      <div id=\"firebaseui-widget\"></div>\n    </div>\n  )\n}","import Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { useState } from 'react';\nimport { TwitterPicker } from 'react-color';\n\nexport default function AjouterDossier({ouvert, setOuvert, gererAjout}) {\n  const [nom, setNom] = useState('');\n  const [couverture, setCouverture] = useState('');\n  const [couleur, setCouleur] = useState('#537169');\n\n  function viderChamps() {\n    setNom('');\n    setCouverture('');\n    setCouleur('#537169');\n  }\n\n  return (\n    <div className=\"AjouterDossier\">\n      <Dialog open={ouvert} onClose={()=>setOuvert(false)} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">Ajouter un dossier</DialogTitle>\n        <DialogContent>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"nomDossier\"\n            label=\"Nom du dossier\"\n            type=\"text\"\n            fullWidth\n            onChange={(e) => setNom(e.target.value)}\n            defaultValue={nom}\n          />\n          <TextField\n            margin=\"dense\"\n            id=\"urlImage\"\n            label=\"Adresse de l'image de couverture\"\n            type=\"text\"\n            fullWidth\n            onChange={(e) => setCouverture(e.target.value)}\n            defaultValue={couverture}\n          />\n          <TwitterPicker \n            width=\"100%\" \n            triangle=\"hide\" \n            onChangeComplete={(couleur, e) => setCouleur(couleur.hex)}\n            color={couleur}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={()=>{setOuvert(false); viderChamps()}} color=\"primary\">\n            Annuler\n          </Button>\n          <Button onClick={() => {nom !== '' && gererAjout(nom, couverture, couleur); viderChamps(); }} color=\"primary\">\n            Ajouter\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}","import './Appli.scss';\nimport Entete from './Entete';\nimport ListeDossiers from './ListeDossiers';\nimport Fab from '@material-ui/core/Fab';\nimport AddIcon from '@material-ui/icons/Add';\nimport Accueil from './Accueil';\nimport { useEffect, useState } from 'react';\nimport firebase from 'firebase/app';\nimport {firestore} from '../firebase';\nimport AjouterDossier from './AjouterDossier';\n\nexport default function Appli() {\n  // État de l'utilisateur\n  const [utilisateur, setUtilisateur] = useState(null);\n\n  // État des dossiers\n  const etatDossiers = useState([]);\n  const [dossiers, setDossiers] = etatDossiers;\n\n  // État de la boîte de dialogue \"Ajout Dossier\"\n  const [ouvert, setOuvert] = useState(false);\n\n  // Valider la connexion utilisateur\n  useEffect(\n    () => {\n     firebase.auth().onAuthStateChanged(\n       util => {\n        setUtilisateur(util);\n        // Créer le profil de l'utilisateur dans Firestore si util n'est pas NULL\n        if(util) {\n          firestore.collection('utilisateurs-ex4').doc(util.uid).set({\n            nom: util.displayName, \n            courriel: util.email, \n            datecompte: firebase.firestore.FieldValue.serverTimestamp()\n          }, {merge: true});\n        }\n      }\n     );\n    }, []\n  );\n  \n  // Ajouter un dossier\n  function gererAjout(nom, couverture, couleur) {\n    // Objet à ajouter dans la collection \"dossiers\" sur Firestore\n    const objDossier = {\n      nom: nom,\n      couverture: couverture,\n      couleur: couleur,\n      datemodif: firebase.firestore.FieldValue.serverTimestamp(),\n      signets: []\n    };\n    // Ajout de l'objet\n    firestore.collection('utilisateurs-ex4').doc(utilisateur.uid).collection('dossiers').add(objDossier).then(\n      refDoc => {\n        // Puis on utilise la référence retournée pour chercher le détail du dossier\n        refDoc.get().then(\n          // Et on modifie l'état des dossiers en joignant ce dernier pour forcer un \"rerender\" du composant \"ListeDossiers\"\n          doc => setDossiers([...dossiers, {...doc.data(), id: doc.id}])\n        );\n        // On oublie pas de fermer la boîte de dialogue\n        setOuvert(false);\n      }\n    )\n  }\n\n  return (\n    <div className=\"Appli\">\n      {\n        // Un utilisateur est connecté ?\n        utilisateur ?\n          <>\n            <Entete utilisateur={utilisateur} />\n            <section className=\"contenu-principal\">\n              <ListeDossiers utilisateur={utilisateur} etatDossiers={etatDossiers} />\n              <AjouterDossier ouvert={ouvert} setOuvert={setOuvert} gererAjout={gererAjout} />\n              <Fab onClick={() => setOuvert(true)} className=\"ajoutRessource\" color=\"primary\" aria-label=\"Ajouter dossier\">\n                <AddIcon />\n              </Fab>\n            </section>\n          </>\n        // Sinon :\n        :\n          <Accueil />\n      }\n    </div>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport Appli from './composants/Appli';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Appli />\n  </React.StrictMode>,\n  document.getElementById('racine')\n);\n"],"sourceRoot":""}